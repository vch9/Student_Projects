<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Marthepp" rel="Chapter" href="Marthepp.html"><link title="Syntaxe du langage jouet Marthe++" rel="Section" href="#2_SyntaxedulangagejouetMarthe">
<link title="Fonctions utilitaires sur les identifiants" rel="Section" href="#2_Fonctionsutilitairessurlesidentifiants">
<link title="Gestion des variables libres, renommage, alpha-équivalence et
   substitution" rel="Section" href="#2_Gestiondesvariableslibresrenommagealphaquivalenceetsubstitution">
<link title="Évaluation" rel="Section" href="#2_valuation">
<title>Marthepp</title>
</head>
<body>
<div class="navbar">&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Marthepp.html">Marthepp</a> (<a href="code_Marthepp.html">.ml</a>)</h1>

<pre><span id="MODULEMarthepp"><span class="keyword">module</span> Marthepp</span>: <code class="code">sig</code> <a href="Marthepp.html">..</a> <code class="code">end</code></pre><div class="info module top">
<div class="info-desc">
<h2 id="1_Cours04Marthe">Cours 04 : Marthe++</h2></div>
</div>
<hr width="100%">
<h3 id="2_SyntaxedulangagejouetMarthe">Syntaxe du langage jouet Marthe++</h3>
<pre><span id="TYPEidentifier"><span class="keyword">type</span> <code class="type"></code>identifier</span> = <code class="type">string</code> </pre>
<div class="info ">
<div class="info-desc">
<p>Type des identifiants.</p>
</div>
</div>


<pre><code><span id="TYPEbop"><span class="keyword">type</span> <code class="type"></code>bop</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Add"><span class="constructor">Add</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Sub"><span class="constructor">Sub</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Mul"><span class="constructor">Mul</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Div"><span class="constructor">Div</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.And"><span class="constructor">And</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Or"><span class="constructor">Or</span></span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTbop.Le"><span class="constructor">Le</span></span></code></td>

</tr></table>

<div class="info ">
<div class="info-desc">
<p>Type des opérateurs binaires.</p>
</div>
</div>


<pre><code><span id="TYPEuop"><span class="keyword">type</span> <code class="type"></code>uop</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTuop.Not"><span class="constructor">Not</span></span></code></td>

</tr></table>

<div class="info ">
<div class="info-desc">
<p>Type des opérateurs unaires.</p>
</div>
</div>


<pre><code><span id="TYPEterm"><span class="keyword">type</span> <code class="type"></code>term</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Id"><span class="constructor">Id</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEidentifier">identifier</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>variables</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.LInt"><span class="constructor">LInt</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>constantes litérales entières</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.LBool"><span class="constructor">LBool</span></span> <span class="keyword">of</span> <code class="type">bool</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>constantes littérales booléennes</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Bop"><span class="constructor">Bop</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEbop">bop</a> * <a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>opération binaire</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Uop"><span class="constructor">Uop</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEuop">uop</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>opération unaire</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Let"><span class="constructor">Let</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEidentifier">identifier</a> * <a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>définition locale</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Pair"><span class="constructor">Pair</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>paires</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Fst"><span class="constructor">Fst</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>première projection</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Snd"><span class="constructor">Snd</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>seconde projection</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.If"><span class="constructor">If</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>conditionnelle</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.Fun"><span class="constructor">Fun</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEidentifier">identifier</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>fonction anonyme</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTterm.App"><span class="constructor">App</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEterm">term</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>application</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>

<div class="info ">
<div class="info-desc">
<p>Type des termes (expressions) du langage Marthe.</p>
</div>
</div>

<p>Les différentes fonctions d'affichage utilisent le module
   <code class="code">Stdlib.Format</code>. On peut ordonner au toplevel d'utiliser la fonction
   d'affichage <code class="code">f</code> via la directive <code class="code">#install_printer f</code>.</p>

<pre><span id="VALprint_id"><span class="keyword">val</span> <a href="code_VALMarthepp.print_id.html">print_id</a></span> : <code class="type">Stdlib.Format.formatter -> string -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_id fmt x</code> affiche l'identifiant <code class="code">x</code> en utilisant le formateur <code class="code">fmt</code>,
   cf. le module <code class="code">Stdlib.Format</code>.</p>
</div>
</div>

<pre><span id="VALprint_binary_op"><span class="keyword">val</span> <a href="code_VALMarthepp.print_binary_op.html">print_binary_op</a></span> : <code class="type">Stdlib.Format.formatter -> <a href="Marthepp.html#TYPEbop">bop</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_binary_op fmt op</code> affiche l'opérateur binaire <code class="code">op</code> en utilisant le
   formateur <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="VALprint_unary_op"><span class="keyword">val</span> <a href="code_VALMarthepp.print_unary_op.html">print_unary_op</a></span> : <code class="type">Stdlib.Format.formatter -> <a href="Marthepp.html#TYPEuop">uop</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_unary_op fmt op</code> affiche l'opérateur unaire <code class="code">op</code> en utilisant le
   formateur <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="VALprint_term"><span class="keyword">val</span> <a href="code_VALMarthepp.print_term.html">print_term</a></span> : <code class="type">Stdlib.Format.formatter -> <a href="Marthepp.html#TYPEterm">term</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_term fmt m</code> affiche le terme <code class="code">m</code> en utilisant le formateur <code class="code">fmt</code>.</p>
</div>
</div>
<h3 id="2_Fonctionsutilitairessurlesidentifiants">Fonctions utilitaires sur les identifiants</h3>
<pre><span id="MODULEId"><span class="keyword">module</span> <a href="Marthepp.Id.html">Id</a></span>: <code class="code">sig</code> <a href="Marthepp.Id.html">..</a> <code class="code">end</code></pre><div class="info">
<p>Enrobe les identifiants pour les rendre compatibles avec <code class="code">Map.S</code>.</p>

</div>

<pre><span id="MODULES"><span class="keyword">module</span> <a href="Marthepp.S.html">S</a></span>: <code class="type">Stdlib.Set.Make</code><code class="code">(</code><code class="type"><a href="Marthepp.Id.html">Id</a></code><code class="code">)</code></pre><div class="info">
<p>Module fournissant une implementation des ensembles finis d'identifiants.</p>

</div>

<pre><span id="MODULEM"><span class="keyword">module</span> <a href="Marthepp.M.html">M</a></span>: <code class="type">Stdlib.Map.Make</code><code class="code">(</code><code class="type"><a href="Marthepp.Id.html">Id</a></code><code class="code">)</code></pre><div class="info">
<p>Module fournissant une implementation des dictionnaires d'identifiants.</p>

</div>

<pre><span id="VALprint_id_set"><span class="keyword">val</span> <a href="code_VALMarthepp.print_id_set.html">print_id_set</a></span> : <code class="type">Stdlib.Format.formatter -> S.t -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_id_set fmt s</code> affiche l'ensemble fini d'identifiants <code class="code">s</code> en utilisant
   le formateur <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="VALprint_id_map"><span class="keyword">val</span> <a href="code_VALMarthepp.print_id_map.html">print_id_map</a></span> : <code class="type">(Stdlib.Format.formatter -> 'a -> unit) -><br>       Stdlib.Format.formatter -> 'a M.t -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_id_set fmt s</code> affiche l'ensemble fini d'identifiants <code class="code">s</code> en utilisant
   le formateur <code class="code">fmt</code>.</p>
</div>
</div>
<h3 id="2_Gestiondesvariableslibresrenommagealphaquivalenceetsubstitution">Gestion des variables libres, renommage, alpha-équivalence et
   substitution</h3>
<pre><span id="VALfv"><span class="keyword">val</span> <a href="code_VALMarthepp.fv.html">fv</a></span> : <code class="type"><a href="Marthepp.html#TYPEterm">term</a> -> S.t</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">fv m</code> retourne l'ensemble des variables libres du terme <code class="code">m</code>.</p>
</div>
</div>

<pre><span id="TYPErenaming"><span class="keyword">type</span> <code class="type"></code>renaming</span> = <code class="type"><a href="Marthepp.html#TYPEidentifier">identifier</a> M.t</code> </pre>
<div class="info ">
<div class="info-desc">
<p>Mathématiquement, un renommage est une fonction partielle finie des
   identifiants dans les identifiants. En OCaml, on représente une telle
   fonction partielle finie par un dictionnaire.</p>
</div>
</div>


<pre><span id="VALprint_renaming"><span class="keyword">val</span> <a href="code_VALMarthepp.print_renaming.html">print_renaming</a></span> : <code class="type">Stdlib.Format.formatter -> string M.t -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_renaming fmt r</code> affiche le renommage <code class="code">r</code> en utilisant le formateur
   <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="VALfresh"><span class="keyword">val</span> <a href="code_VALMarthepp.fresh.html">fresh</a></span> : <code class="type">S.t -> string</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">fresh s</code> retourne un identifiant n'appartenant pas à l'ensemble <code class="code">s</code>. *</p>
</div>
</div>
<p>À faire : implémenter la substitution !</p>
<h3 id="2_valuation">Évaluation</h3><p>Cette section définit un évaluateur à grands pas pour Marthe++.</p>

<pre><code><span id="TYPEvalue"><span class="keyword">type</span> <code class="type"></code>value</span> = </code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTvalue.VInt"><span class="constructor">VInt</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>entier</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTvalue.VBool"><span class="constructor">VBool</span></span> <span class="keyword">of</span> <code class="type">bool</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>booléen</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTvalue.VPair"><span class="constructor">VPair</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEvalue">value</a> * <a href="Marthepp.html#TYPEvalue">value</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>paire</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTvalue.VClo"><span class="constructor">VClo</span></span> <span class="keyword">of</span> <code class="type"><a href="Marthepp.html#TYPEidentifier">identifier</a> * <a href="Marthepp.html#TYPEterm">term</a> * <a href="Marthepp.html#TYPEenvironment">environment</a></code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><div class="info ">
<div class="info-desc">
<p>fermeture</p>
</div>
</div>
</td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr></table>



<pre><span id="TYPEenvironment"><span class="keyword">type</span> <code class="type"></code>environment</span> = <code class="type"><a href="Marthepp.html#TYPEvalue">value</a> M.t</code> </pre>


<pre><span id="VALprint_value"><span class="keyword">val</span> <a href="code_VALMarthepp.print_value.html">print_value</a></span> : <code class="type">Stdlib.Format.formatter -> <a href="Marthepp.html#TYPEvalue">value</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_value fmt v</code> affiche la valeur <code class="code">v</code> en utilisant le formateur
   <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="VALprint_environment"><span class="keyword">val</span> <a href="code_VALMarthepp.print_environment.html">print_environment</a></span> : <code class="type">Stdlib.Format.formatter -> <a href="Marthepp.html#TYPEenvironment">environment</a> -> unit</code></pre><div class="info ">
<div class="info-desc">
<p><code class="code">print_environment fmt env</code> affiche l'environnement <code class="code">env</code> en utilisant le
   formateur <code class="code">fmt</code>.</p>
</div>
</div>

<pre><span id="EXCEPTIONIll_typed"><span class="keyword">exception</span> Ill_typed</span></pre>

<pre><span id="VALeval"><span class="keyword">val</span> <a href="code_VALMarthepp.eval.html">eval</a></span> : <code class="type"><a href="Marthepp.html#TYPEvalue">value</a> M.t -> <a href="Marthepp.html#TYPEterm">term</a> -> <a href="Marthepp.html#TYPEvalue">value</a></code></pre></body></html>
